(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit-product"],{"0373":function(e,t,o){"use strict";var c=o("7a23");const n=Object(c["withScopeId"])("data-v-168cace2");Object(c["pushScopeId"])("data-v-168cace2");const a=Object(c["createTextVNode"])(" No Category ");Object(c["popScopeId"])();const r=n((e,t,o,r,d,l)=>{const i=Object(c["resolveComponent"])("MDBDropdownToggle"),u=Object(c["resolveComponent"])("MDBDropdownItem"),b=Object(c["resolveComponent"])("MDBDropdownMenu"),p=Object(c["resolveComponent"])("MDBDropdown"),s=Object(c["resolveComponent"])("MDBSpinner");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[!e.loading&&e.data?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:0,modelValue:e.showDropdown,"onUpdate:modelValue":t[3]||(t[3]=t=>e.showDropdown=t),align:"end"},{default:n(()=>[Object(c["createVNode"])(i,{class:"category-dropdown",onClick:t[1]||(t[1]=t=>e.showDropdown=!e.showDropdown),disabled:void 0===e.data},{default:n(()=>[Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.categoryName),1)]),_:1},8,["disabled"]),Object(c["createVNode"])(b,{"aria-labelledby":"dropdownMenuButton"},{default:n(()=>[Object(c["createVNode"])(u,{class:"dropdown-item",onMouseup:t[2]||(t[2]=t=>e.setDropdown(void 0))},{default:n(()=>[a]),_:1}),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.data,(t,o)=>(Object(c["openBlock"])(),Object(c["createBlock"])(u,{class:"dropdown-item",key:o,onMouseup:o=>e.setDropdown(t.id)},{default:n(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.name),1)]),_:2},1032,["onMouseup"]))),128))]),_:1})]),_:1},8,["modelValue"])):Object(c["createCommentVNode"])("",!0),e.loading?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:1},{default:n(()=>[Object(c["createVNode"])(i,{class:"category-dropdown",color:"primary",disabled:""},{default:n(()=>[Object(c["createVNode"])(s,{tag:"span",size:"sm"})]),_:1})]),_:1})):Object(c["createCommentVNode"])("",!0)],64)});var d=o("d318"),l=o("73fa"),i=o("1181"),u=o("962f"),b=o("0613"),p=Object(c["defineComponent"])({name:"CategoryDropdown",components:{MDBDropdown:d["MDBDropdown"],MDBDropdownToggle:d["MDBDropdownToggle"],MDBDropdownMenu:d["MDBDropdownMenu"],MDBDropdownItem:d["MDBDropdownItem"],MDBSpinner:d["MDBSpinner"]},setup:function(){var e=Object(b["b"])(),t=Object(c["ref"])(!1),o=Object(c["computed"])((function(){return e.getters.getCategoryDropdown})),n=function(o){e.dispatch("updateCategoryDropdown",o),t.value=!1},a=Object(l["b"])("SWR","/category-dropdown",(function(){return Object(i["c"])(u["d"])})),r=a.data,d=a.loading,p=Object(c["computed"])((function(){if(!r.value)return"No categories";if(!o.value)return"No category";var e=r.value.filter((function(e){return e.id===o.value}))[0];return e?e.name:"No category"}));return{showDropdown:t,setDropdown:n,data:r,loading:d,categoryName:p}}});o("5e0d");p.render=r,p.__scopeId="data-v-168cace2";t["a"]=p},"0b84":function(e,t,o){"use strict";o("2dea")},"196a":function(e,t,o){"use strict";o.r(t);var c=o("7a23");function n(e,t,o,n,a,r){const d=Object(c["resolveComponent"])("EditProductTemplate"),l=Object(c["resolveComponent"])("Spinner");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Suspense"],null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(d,{id:e.id},null,8,["id"])]),fallback:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l)]),_:1})}const a=Object(c["createVNode"])("div",null,"Category:",-1),r=Object(c["createTextVNode"])(" Save changes ");function d(e,t,o,n,d,l){const i=Object(c["resolveComponent"])("ImageContainer"),u=Object(c["resolveComponent"])("MDBCol"),b=Object(c["resolveComponent"])("CategoryDropdown"),p=Object(c["resolveComponent"])("MDBInput"),s=Object(c["resolveComponent"])("ErrorField"),j=Object(c["resolveComponent"])("MDBTextarea"),O=Object(c["resolveComponent"])("MDBBtn"),m=Object(c["resolveComponent"])("MDBRow"),g=Object(c["resolveComponent"])("MDBContainer");return Object(c["openBlock"])(),Object(c["createBlock"])(g,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(m,{tag:"form",class:"g-3",onSubmit:Object(c["withModifiers"])(e.onSubmit,["prevent"])},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(u,{col:"12"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(i,{height:"40vh",width:"100%",name:e.values.name,"img-url":e.values.imgUrl},null,8,["name","img-url"])]),_:1}),Object(c["createVNode"])(u,{col:"12",class:"d-flex justify-content-between align-items-center"},{default:Object(c["withCtx"])(()=>[a,Object(c["createVNode"])(b)]),_:1}),Object(c["createVNode"])(u,{col:"12"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{label:"Product Name",modelValue:e.values.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.values.name=t)},null,8,["modelValue"]),Object(c["createVNode"])(s,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.errors.name),1)]),_:1})]),_:1}),Object(c["createVNode"])(u,{col:"12"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{label:"Image Url",modelValue:e.values.imgUrl,"onUpdate:modelValue":t[2]||(t[2]=t=>e.values.imgUrl=t)},null,8,["modelValue"]),Object(c["createVNode"])(s,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.errors.imgUrl),1)]),_:1})]),_:1}),Object(c["createVNode"])(u,{col:"12"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{label:"Price",type:"number",modelValue:e.values.price,"onUpdate:modelValue":t[3]||(t[3]=t=>e.values.price=t)},null,8,["modelValue"]),Object(c["createVNode"])(s,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.errors.price),1)]),_:1})]),_:1}),Object(c["createVNode"])(u,{col:"12"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(j,{label:"Description",rows:"4",modelValue:e.values.description,"onUpdate:modelValue":t[4]||(t[4]=t=>e.values.description=t)},null,8,["modelValue"]),Object(c["createVNode"])(s,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.errors.description),1)]),_:1})]),_:1}),Object(c["createVNode"])(u,{col:"12",class:"d-flex justify-content-end mb-2"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O,{color:"light",type:"submit",disabled:!e.meta.dirty||!e.meta.valid},{default:Object(c["withCtx"])(()=>[r]),_:1},8,["disabled"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var l=o("9ab4"),i=o("d318"),u=o("7bb1"),b=o("6c42"),p=o("506a"),s=o("73fa"),j=o("1181"),O=o("ce78"),m=o("0373"),g=o("ad5e"),f=o("b9aa"),v=o("0613"),w=Object(c["defineComponent"])({name:"EditProductTemplate",props:{id:{type:String,required:!0}},components:{ErrorField:g["a"],CategoryDropdown:m["a"],MDBInput:i["MDBInput"],MDBTextarea:i["MDBTextarea"],MDBBtn:i["MDBBtn"],ImageContainer:f["a"],MDBRow:i["MDBRow"],MDBCol:i["MDBCol"],MDBContainer:i["MDBContainer"]},setup:function(e){return Object(l["b"])(this,void 0,void 0,(function(){var t,o,n,a,r,d,i,m,g,f,w,D,B,C,V,h,y;return Object(l["d"])(this,(function(l){switch(l.label){case 0:return t=Object(b["b"])(),o=Object(v["b"])(),n=Object(p["c"])({name:Object(p["e"])().required().min(4).label("Product name"),imgUrl:Object(p["e"])().required().url().label("Image URL"),price:Object(p["b"])().required().min(0).label("Product price"),description:Object(p["e"])().notRequired(),categoryId:Object(p["e"])().notRequired()}),a=o.watch((function(){return o.getters.getCategoryDropdown}),(function(e){i.categoryId=e})),r=function(){g.value.valid=!1},d=Object(u["b"])({validationSchema:n,initialValues:{name:"",imgUrl:"",price:void 0,description:"",categoryId:""}}),i=d.values,m=d.errors,g=d.meta,Object(u["a"])("name"),Object(u["a"])("imgUrl"),Object(u["a"])("price"),Object(u["a"])("description"),Object(u["a"])("categoryId"),f=function(){i.price=Number(i.price),Object(j["e"])("product",e.id,i),r(),t.success("Product has been updated!")},Object(c["onUnmounted"])((function(){a(),o.dispatch("updateCategoryDropdown",void 0)})),[4,Object(s["a"])("SWR","/edit-product-"+e.id,(function(){return Object(j["d"])(O["f"],{id:e.id})}))];case 1:return w=l.sent(),D=w,B=D.name,C=D.imgUrl,V=D.price,h=D.description,y=D.categoryId,i.name=g.value.initialValues.name=B,i.imgUrl=g.value.initialValues.imgUrl=C,i.price=g.value.initialValues.price=V,i.description=g.value.initialValues.description=h,i.categoryId=g.value.initialValues.categoryId=y,o.dispatch("updateCategoryDropdown",y),[2,{values:i,errors:m,meta:g,onSubmit:f}]}}))}))}});w.render=d;var D=w,B=o("2375"),C=Object(c["defineComponent"])({name:"edit-product",components:{Spinner:B["a"],EditProductTemplate:D},props:{id:{type:String,required:!0}}});C.render=n;t["default"]=C},2375:function(e,t,o){"use strict";var c=o("7a23");const n=Object(c["withScopeId"])("data-v-2d917819"),a=n((e,t,o,a,r,d)=>{const l=Object(c["resolveComponent"])("MDBSpinner"),i=Object(c["resolveComponent"])("MDBCol");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{class:"d-flex justify-content-center align-items-center custom-spinner"},{default:n(()=>[Object(c["createVNode"])(l,{color:"primary"})]),_:1})});var r=o("d318"),d=Object(c["defineComponent"])({name:"Spinner",components:{MDBSpinner:r["MDBSpinner"],MDBCol:r["MDBCol"]}});o("0b84");d.render=a,d.__scopeId="data-v-2d917819";t["a"]=d},"2dea":function(e,t,o){},"3a8f":function(e,t,o){e.exports=o.p+"img/no-photo.cfebf14d.svg"},"5e0d":function(e,t,o){"use strict";o("aed1")},aed1:function(e,t,o){},b9aa:function(e,t,o){"use strict";var c=o("7a23"),n=o("3a8f"),a=o.n(n);const r=Object(c["withScopeId"])("data-v-0c088326");Object(c["pushScopeId"])("data-v-0c088326");const d={key:1,class:"image-container__placeholder",src:a.a,alt:""};Object(c["popScopeId"])();const l=r((e,t,o,n,a,r)=>(Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"image-container",style:`height: ${e.height}; width: ${e.width};`},[e.hasHttpInUrl(e.imgUrl)?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,class:"background-image",style:`background-image: url(${e.imgUrl});`},null,4)):(Object(c["openBlock"])(),Object(c["createBlock"])("img",d))],4)));var i=Object(c["defineComponent"])({name:"ImageContainer",props:{height:{type:String,required:!0},width:{type:String,required:!0},imgUrl:{type:String,required:!0},name:{type:String,required:!0}},setup:function(){var e=function(e){return null!=e.match(/(http(s?))/gim)};return{hasHttpInUrl:e}}});o("f39a");i.render=l,i.__scopeId="data-v-0c088326";t["a"]=i},bdb5:function(e,t,o){},f39a:function(e,t,o){"use strict";o("bdb5")}}]);
//# sourceMappingURL=edit-product.ace0dc6b.js.map