{"version":3,"sources":["webpack:///./src/views/auth-layout/login/login.vue?0104","webpack:///./src/views/auth-layout/login/login.vue","webpack:///./src/views/auth-layout/login/login.vue?28a4","webpack:///./src/views/auth-layout/login/login.vue?bff9"],"names":["class","tag","onSubmit","col","label","values","email","errors","type","showPassword","password","color","changeShowPassword","icon","iconStyle","disabled","meta","valid","name","components","ErrorField","MDBInput","MDBBtn","MDBRow","MDBCol","MDBContainer","MDBIcon","setup","toast","schema","required","min","validationSchema","initialValues","setFieldError","value","Promise","username","res","error","router","push","sessionStorage","getItem","success","render","__scopeId"],"mappings":"yGAAA,W,yLCSaA,MAAM,kB,+BA6BV,W,6YArCP,yBA0Ce,Q,UAzCb,IAwCS,CAxCT,yBAwCS,GAxCDC,IAAI,OAAOD,MAAM,MAAO,SAAM,2BAAU,EAAAE,SAAQ,c,WACtD,IAGS,CAHT,yBAGS,GAHDC,IAAI,MAAI,C,UACd,IAAiD,CAAjD,yBAAiD,GAAvCC,MAAM,Q,WAAiB,EAAAC,OAAOC,M,qCAAP,EAAAD,OAAOC,MAAK,I,uBAC7C,yBAA6C,Q,UAAhC,IAAkB,C,0DAAf,EAAAC,OAAOD,OAAK,K,cAG9B,yBAoBS,GApBDH,IAAI,MAAI,C,UACd,IAiBM,CAjBN,yBAiBM,MAjBN,EAiBM,CAhBJ,yBAKE,GAJAH,MAAM,wBACNI,MAAM,WACLI,KAAM,EAAAC,aAAe,OAAS,W,WACtB,EAAAJ,OAAOK,S,qCAAP,EAAAL,OAAOK,SAAQ,I,8BAE1B,yBASS,GARPV,MAAM,uBACNW,MAAM,OACL,QAAO,EAAAC,oB,WAER,IAGE,CAHF,yBAGE,GAFCC,KAAM,EAAAJ,aAAe,YAAc,MACpCK,UAAU,O,yCAIhB,yBAAgD,Q,UAAnC,IAAqB,C,0DAAlB,EAAAP,OAAOG,UAAQ,K,cAGjC,yBAWS,Q,UARP,IAOS,CAPT,yBAOS,GANPC,MAAM,OACNX,MAAM,QACNQ,KAAK,SACJO,UAAW,EAAAC,KAAKC,O,WAClB,IAED,C,sKCtBO,+BAAgB,CAC7BC,KAAM,QACNC,WAAY,CACVC,WAAU,OACVC,SAAQ,cACRC,OAAM,YACNC,OAAM,YACNC,OAAM,YACNC,aAAY,kBACZC,QAAO,cAETC,MAAA,sBACQC,EAAQ,iBACRnB,EAAe,kBAAI,GACnBoB,EAAS,eAAO,CACpBvB,MAAO,iBAASwB,WAAWxB,QAAQF,MAAM,SACzCM,SAAU,iBAASoB,WAAWC,IAAI,GAAG3B,MAAM,cAGvC,EAA0C,eAAQ,CACtD4B,iBAAkBH,EAClBI,cAAe,CAAE3B,MAAO,GAAII,SAAU,MAFhCL,EAAM,SAAEE,EAAM,SAAES,EAAI,OAAEkB,EAAa,gBAI3C,eAAiB,SACjB,eAAiB,YAEjB,IAAMtB,EAAqB,WACzBH,EAAa0B,OAAS1B,EAAa0B,OAG/BjC,EAAW,0CAAUkC,SAAO,W,yEAEhC,OADQ9B,EAAoBD,EAAM,MAAnBK,EAAaL,EAAM,SAC5BC,GAASI,EAEH,GAAM,eAAM,CACtB2B,SAAU/B,EACVI,SAAUA,KAJc,I,cAEpB4B,EAAM,SAIA,0BAARA,IACFJ,EAAc,QAAS,uBACvBN,EAAMW,MAAM,wBAEF,6BAARD,IACFJ,EAAc,WAAY,0BAC1BN,EAAMW,MAAM,2BAEF,YAARD,EAAA,MACF,GAAME,EAAA,KAAOC,KACXC,eAAeC,QAAQ,0BAA4B,a,OADrD,SAGAf,EAAMgB,QAAQ,qB,mCAIlB,MAAO,CACLnC,aAAY,EACZJ,OAAM,EACNE,OAAM,EACNS,KAAI,EACJJ,mBAAkB,EAClBV,SAAQ,M,UCzEd,EAAO2C,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/login.7b75bc73.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./login.vue?vue&type=style&index=0&id=dea89afc&scoped=true&lang=scss\"","<template>\n  <MDBContainer>\n    <MDBRow tag=\"form\" class=\"g-3\" @submit.prevent=\"onSubmit\">\n      <MDBCol col=\"12\">\n        <MDBInput label=\"Email\" v-model=\"values.email\" />\n        <ErrorField> {{ errors.email }} </ErrorField>\n      </MDBCol>\n\n      <MDBCol col=\"12\">\n        <div class=\"password-block\">\n          <MDBInput\n            class=\"password-block__input\"\n            label=\"Password\"\n            :type=\"showPassword ? 'text' : 'password'\"\n            v-model=\"values.password\"\n          />\n          <MDBBtn\n            class=\"password-block__show\"\n            color=\"dark\"\n            @click=\"changeShowPassword\"\n          >\n            <MDBIcon\n              :icon=\"showPassword ? 'eye-slash' : 'eye'\"\n              iconStyle=\"fas\"\n            />\n          </MDBBtn>\n        </div>\n        <ErrorField> {{ errors.password }} </ErrorField>\n      </MDBCol>\n\n      <MDBCol>\n        <!--        &lt;!&ndash;        :disabled=\"!meta.valid\"&ndash;&gt;-->\n        <!--        {{ meta.valid === true }}-->\n        <MDBBtn\n          color=\"dark\"\n          class=\"w-100\"\n          type=\"submit\"\n          :disabled=\"!meta.valid\"\n        >\n          Login\n        </MDBBtn>\n      </MDBCol>\n    </MDBRow>\n  </MDBContainer>\n</template>\n\n<script lang=\"ts\">\nimport {\n  MDBBtn,\n  MDBCol,\n  MDBContainer,\n  MDBIcon,\n  MDBInput,\n  MDBRow,\n} from 'mdb-vue-ui-kit'\nimport { useField, useForm } from 'vee-validate'\nimport { defineComponent, ref } from \"vue\";\nimport { useToast } from 'vue-toastification'\nimport { object, string } from 'yup'\n\nimport { login } from '@/api/jwt-api/requests'\nimport ErrorField from '@/components/ErrorField.vue'\nimport router from '@/router'\n\nexport default defineComponent({\n  name: 'login',\n  components: {\n    ErrorField,\n    MDBInput,\n    MDBBtn,\n    MDBRow,\n    MDBCol,\n    MDBContainer,\n    MDBIcon,\n  },\n  setup() {\n    const toast = useToast()\n    const showPassword = ref(false)\n    const schema = object({\n      email: string().required().email().label('Email'),\n      password: string().required().min(4).label('Password'),\n    })\n\n    const { values, errors, meta, setFieldError } = useForm({\n      validationSchema: schema,\n      initialValues: { email: '', password: '' },\n    })\n    useField<string>('email')\n    useField<string>('password')\n\n    const changeShowPassword = (): void => {\n      showPassword.value = !showPassword.value\n    }\n\n    const onSubmit = async (): Promise<void> => {\n      const { email, password } = values\n      if (!(email && password)) return\n      // TODO need to bcrypt this\n      const res = await login({\n        username: email,\n        password: password,\n      })\n      if (res === 'The login is invalid.') {\n        setFieldError('email', 'Email is incorrect.')\n        toast.error('Email is incorrect.')\n      }\n      if (res === 'The password is invalid.') {\n        setFieldError('password', 'Password is incorrect.')\n        toast.error('Password is incorrect.')\n      }\n      if (res === 'Logged.') {\n        await router.push(\n          sessionStorage.getItem('redirectPathAfterAuth') || '/profile',\n        )\n        toast.success('Successful login!')\n      }\n    }\n\n    return {\n      showPassword,\n      values,\n      errors,\n      meta,\n      changeShowPassword,\n      onSubmit,\n    }\n  },\n})\n</script>\n\n<style scoped lang=\"scss\">\n.password-block {\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  grid-template-areas: 'input show';\n  &__input {\n    grid-area: input;\n  }\n  &__show {\n    grid-area: show;\n    width: 40px;\n    padding: 0;\n  }\n}\n</style>\n","\nimport {\n  MDBBtn,\n  MDBCol,\n  MDBContainer,\n  MDBIcon,\n  MDBInput,\n  MDBRow,\n} from 'mdb-vue-ui-kit'\nimport { useField, useForm } from 'vee-validate'\nimport { defineComponent, ref } from \"vue\";\nimport { useToast } from 'vue-toastification'\nimport { object, string } from 'yup'\n\nimport { login } from '@/api/jwt-api/requests'\nimport ErrorField from '@/components/ErrorField.vue'\nimport router from '@/router'\n\nexport default defineComponent({\n  name: 'login',\n  components: {\n    ErrorField,\n    MDBInput,\n    MDBBtn,\n    MDBRow,\n    MDBCol,\n    MDBContainer,\n    MDBIcon,\n  },\n  setup() {\n    const toast = useToast()\n    const showPassword = ref(false)\n    const schema = object({\n      email: string().required().email().label('Email'),\n      password: string().required().min(4).label('Password'),\n    })\n\n    const { values, errors, meta, setFieldError } = useForm({\n      validationSchema: schema,\n      initialValues: { email: '', password: '' },\n    })\n    useField<string>('email')\n    useField<string>('password')\n\n    const changeShowPassword = (): void => {\n      showPassword.value = !showPassword.value\n    }\n\n    const onSubmit = async (): Promise<void> => {\n      const { email, password } = values\n      if (!(email && password)) return\n      // TODO need to bcrypt this\n      const res = await login({\n        username: email,\n        password: password,\n      })\n      if (res === 'The login is invalid.') {\n        setFieldError('email', 'Email is incorrect.')\n        toast.error('Email is incorrect.')\n      }\n      if (res === 'The password is invalid.') {\n        setFieldError('password', 'Password is incorrect.')\n        toast.error('Password is incorrect.')\n      }\n      if (res === 'Logged.') {\n        await router.push(\n          sessionStorage.getItem('redirectPathAfterAuth') || '/profile',\n        )\n        toast.success('Successful login!')\n      }\n    }\n\n    return {\n      showPassword,\n      values,\n      errors,\n      meta,\n      changeShowPassword,\n      onSubmit,\n    }\n  },\n})\n","import { render } from \"./login.vue?vue&type=template&id=dea89afc&scoped=true\"\nimport script from \"./login.vue?vue&type=script&lang=ts\"\nexport * from \"./login.vue?vue&type=script&lang=ts\"\n\nimport \"./login.vue?vue&type=style&index=0&id=dea89afc&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-dea89afc\"\n\nexport default script"],"sourceRoot":""}